{% extends "index.html" %}
{% load static from staticfiles %}
{% load i18n %}
{% load humanize %}
{% block main %} 
    
        <div class="row margin-top-50">
          <div class="col-md-12">   
                <div class="portlet box toolbar_blue">
                    <div class="portlet-title">
                        <div class="caption bold">
                                    <i class="fa fa-cubes"></i>REMITOS DE VENTA <small> impresión</small>
                        </div>
                         <div class="actions">
                            <button tittle="Búsqueda Avanzada" data-toggle="collapse" aria-expanded="true"  class="btn btn-circle active" data-target="#barra_busqueda" aria-controls="barra_busqueda"><i class="glyphicon glyphicon-search"></i></button>
                    </div>

                    </div> 
                </div>
                    {% include "general/varios/barra_busqueda.html" %}                                
                    <table id="dataTables-cpb_remito" class="table table-striped compact table-hover table-no-bordered tabla_nueva nowrap">          
                        <thead>
                            <tr>
                                <th class="no-sort text-center"></th>                                
                                <th class="text-center">Fecha CPB</th>                                
                                <th>Nº CPB</th>
                                <th>Cliente</th>
                                <th>Descripción</th>                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for cpb in comprobantes %}
                            <tr {% if cpb.estado.pk = 3 %}class="{{cpb.estado.color}}"{% endif %}>                                                          
                                <td><div class="btn-group">
                                      <button type="button" class="btn btn-xs blue-hoki" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="icon-settings"> </i> <span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu dropdown-menu-default">
                                        <li>{% include "general/varios/cpb_ver_dropdown.html" %}</li>
                                        <li><a href="{% url 'cpb_remito_editar' id=cpb.pk %}"  title="Editar" data-fm-callback="reload" ><i class="icon-note"></i> Editar</a></li>
                                        <li><a href="#" 
                                                    onClick="alerta= alertify.dialog('confirm').set({'labels':{ok:'Aceptar', cancel:'Cancelar'},'message': '¿DESEA ELIMINAR EL REGISTRO SELECCIONADO?',transition:'fade','onok': function(){ window.location.href = '{% url 'cpb_remito_eliminar' id=cpb.pk %}'; },'oncancel': function(){ return true;} }); alerta.setting('modal', true); alerta.setHeader('ELIMINAR COMPROBANTE'); alerta.show(); return true;"><i class="icon-trash"></i>Eliminar</a>
                                                </li>                                             
                                      </ul>
                                    </div>                              
                                </td>                                 
                                <td>{{cpb.fecha_cpb|date:'d/m/Y'}}</td>                                
                                <td>{{ cpb.pto_vta.numero|default_if_none:'' }}-{{ cpb.letra|default_if_none:'' }}-{{ cpb.numero|default_if_none:'' }}</td>                                
                                <td  title="{{ cpb.entidad}}" >{% include "entidades/proveedor_ver.html" %}{{ cpb.entidad|truncatechars:60 }}</td>                                                        
                                <td>{{ cpb.descripcion|default_if_none:'' }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                         <tfoot>
                            <tr>                                
                                <th></th> 
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>                                
                            </tr>
                        </tfoot>
                    </table>                            
        </div>
      </div>
    

    
 
<script type="text/javascript">

$(document).ready(function() { 

$.fn.datepicker.dates['es'] = {
    days: ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"],
    daysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb", "Dom"],
    daysMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa", "Do"],
    months: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
    monthsShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
    today: "Hoy"
  };
  
   $('.datepicker').datepicker({
          format: "dd/mm/yyyy",
          language: "es",
          autoclose: true,
          todayHighlight: true
    }); 
    
moment.locale('es');
$.fn.dataTable.moment('DD/MM/YYYY'); 
var tabla = $('#dataTables-cpb_remito').DataTable({
            "language": {
                "decimal": ",",
                "thousands": ".",                 
                "sProcessing": "Procesando...",
                "sLengthMenu": "Mostrar _MENU_ registros",
                "sZeroRecords": "No se encontraron resultados",
                "sEmptyTable": "No hay registros en esta tabla",
                "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                "sInfoPostFix": "",
                "sSearch": "Buscar:",
                "sUrl": "",
                "sInfoThousands": ",",
                "sLoadingRecords": "Cargando...",
                "oPaginate": {
                    "sFirst": "Primero",
                    "sLast": "Ãšltimo",
                    "sNext": "Siguiente",
                    "sPrevious": "Anterior"
                },
                "oAria": {
                    "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                    "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                },
                      
            },                      
            "columnDefs": [ {
                  "targets"  : 'no-sort',
                  "orderable": false,
                }],          
           "paging":   true,
           "lengthMenu": [[20, 50, -1], [20, 50, "Todos"]],
           "autoWidth": false,
           "order": [],
           "colReorder": true,
           "searching": true,
            fixedHeader: {
              header: true,
              footer: false
              },
            responsive: true,
            dom: 'Bfrtlip',
            buttons: [
                {
                    extend:    'colvis',
                    text:      '<i class="fa fa-list"></i>',
                    titleAttr: 'Ver/Ocultar',
                    className: 'btnToolbar',                    
                },
                {
                    extend:    'copyHtml5',
                    text:      '<i class="fa fa-files-o"></i>',
                    titleAttr: 'Copiar',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
                {
                    extend:    'excel',
                    text:      '<i class="fa fa-file-excel-o"></i>',
                    titleAttr: 'Excel',
                    exportOptions: { columns: ':visible', },

                    className: 'btnToolbar',                    
                },
               
                {
                    extend:    'pdfHtml5',
                    text:      '<i class="fa fa-file-pdf-o"></i>',
                    titleAttr: 'PDF',footer: true,
                    exportOptions: { columns: ':visible'},
                    orientation: 'landscape',
                    className: 'btnToolbar',                    
                },
                {
                    extend: 'print',
                    text:      '<i class="fa fa-print"></i>',
                    titleAttr: 'Imprimir',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
            ],
            // initComplete: function () {
            //    // this.api().columns().every( function () {[0, 1, 9]
            //     this.api().columns([1]).every( function () {
            //         var column = this;
            //         var select = $('<select class="form-control"><option value=""></option></select>')
            //             .appendTo( $(column.footer()).empty() )
            //             .on( 'change', function () {
            //                 var val = $.fn.dataTable.util.escapeRegex(
            //                     $(this).val()
            //                 );
     
            //                 column
            //                     .search( val ? '^'+val+'$' : '', true, false )
            //                     .draw();
            //             } );
     
            //          column.data().unique().sort().each( function ( d, j ) {
            //         //column.cells('', column[0]).render('display').sort().unique().each( function ( d, j ){
            //             select.append( '<option value="'+d+'">'+d+'</option>' )
            //         } );
            //     } );

            // }
        });




});
</script>
{% endblock main %}









