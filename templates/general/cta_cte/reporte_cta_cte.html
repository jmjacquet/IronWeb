{% extends "index.html" %}
{% load static from staticfiles %}
{% load i18n %}
{% load humanize %}
{% block main %} 
    
        <div class="row">
          <div class="col-md-12">   
            <div class="portlet box blue-hoki">
                <div class="portlet-title">
                    <div class="caption">
                                <i class="fa fa-cubes"></i>CUENTA CORRIENTE CLIENTES 
                    </div>
                </div> 
            </div>
                     <a class="btn btn-sm blue-hoki" style="float:left;margin-right:20px;" href="{% url 'cpb_venta_nuevo' %}">Nueva Venta</a>
                     <button class="btn btn-sm blue-hoki" value="" id="btnCobranza"  style="float:left;margin-right:20px;" >Cobranza</button>                  
                    <table id="dataTables-cpb_venta" class="table compact hover table-no-bordered tabla_nueva nowrap">         
                        <thead>
                            <tr>
                                <th class="no-sort text-center">Cliente</th>
                                <th class="no-sort text-center">Comprobante</th>
                                <th class="no-sort text-center">Fecha</th>                                
                                <th class="text-center">Tipo</th>                                
                                <th class="text-right">Debe</th>                                                               
                                <th class="text-right">Haber</th>                                                               
                            </tr>
                        </thead>
                        <tbody>
                            {% for cpb in reporte %}
                            <tr>                                
                                <td><strong><a href="{% url 'cliente_editar' id=cpb.entidad.id %}"class="fm-update " title="Editar Datos Cliente" data-fm-callback="reload" data-fm-head="EDITAR CLIENTE"data-fm-target="#object-{{ cpb.entidad.pk }}">{{ cpb.entidad|truncatechars:80 }}</a><strong></td>
                                <td><strong>{{ cpb}}</strong></td>                                                                
                                <td class="text-center">{{cpb.fecha_cpb|date:'d/m/Y'}}</td>
                                <td class="text-center">{{ cpb.cpb_tipo|default_if_none:'' }}</td>                                
                                {% if cpb.cpb_tipo.signo_ctacte > 0 %}
                                    <td class="text-right"><strong>${{cpb.importe_total|default_if_none:0|floatformat:2|intcomma}}</strong></td>                                 
                                    <td></td>
                                {% else %}
                                    <td></td>
                                    <td class="text-right"><strong>${{cpb.importe_total|default_if_none:0|floatformat:2|intcomma}}</strong></td>                                 
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th></th>
                                <th></th> 
                                <th></th>                                 
                                <th></th>
                                <th class="text-right"><strong>${{tot_debe|default_if_none:0|floatformat:2|intcomma}}</strong></td>                                 
                                <th class="text-right"><strong>${{tot_haber|default_if_none:0|floatformat:2|intcomma}}</strong></td>                                 
                            </tr>
                        </tfoot>
                    </table>                                                 
                
            </div>
           </div>
        </div>
      </div>


<script type="text/javascript">

$(document).ready(function() { 
    
moment.locale('es');
$.fn.dataTable.moment('DD/MM/YYYY'); 
var tabla = $('#dataTables-cpb_venta').DataTable({
            "language": {
                "sProcessing": "Procesando...",
                "sLengthMenu": "Mostrar _MENU_ registros",
                "sZeroRecords": "No se encontraron resultados",
                "sEmptyTable": "No hay registros en esta tabla",
                "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                "sInfoPostFix": "",
                "sSearch": "Buscar:",
                "sUrl": "",
                "sInfoThousands": ",",
                "sLoadingRecords": "Cargando...",
                "oPaginate": {
                    "sFirst": "Primero",
                    "sLast": "Ãšltimo",
                    "sNext": "Siguiente",
                    "sPrevious": "Anterior"
                },
                "oAria": {
                    "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                    "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                },
                      
            },                      
            "columnDefs": [ {
                  "targets"  : 'no-sort',
                  "orderable": false,
                }],          
           "bPaginate": false,
           "autoWidth": false,
           "order": [],
           "colReorder": true,
           "searching": true,
            fixedHeader: {
              header: true,
              footer: true
              },
           responsive: true,
           dom: 'Bfrtip',
            buttons: [
                {
                    extend:    'colvis',
                    text:      '<i class="fa fa-list"></i>',
                    titleAttr: 'Ver/Ocultar',
                    className: 'btnToolbar',                    
                },
                {
                    extend:    'copyHtml5',
                    text:      '<i class="fa fa-files-o"></i>',
                    titleAttr: 'Copiar',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
                {
                    extend:    'excelHtml5',
                    text:      '<i class="fa fa-file-excel-o"></i>',
                    titleAttr: 'Excel',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
               
                {
                    extend:    'pdfHtml5',
                    text:      '<i class="fa fa-file-pdf-o"></i>',
                    titleAttr: 'PDF',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
                {
                    extend: 'print',
                    text:      '<i class="fa fa-print"></i>',
                    titleAttr: 'Imprimir',
                    exportOptions: { columns: ':visible' },
                    className: 'btnToolbar',                    
                },
            ],            
        });

});

</script>
{% endblock main %}





